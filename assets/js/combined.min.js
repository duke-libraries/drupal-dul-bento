function ClearText(){document.forms.queryBox.elements.Ntt.value="",document.forms.queryBox.elements.Ntt.className="catalog_search"}!function(e){e.fn.extend({autocomplete:function(t,n){var a="string"==typeof t;return n=e.extend({},e.Autocompleter.defaults,{url:a?t:null,data:a?null:t,delay:a?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(e){return e},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")},hideSuggestions:function(){this.trigger("hideSuggestions")}}),e.Autocompleter=function(t,n){function a(){var a=I.selected();if(!a)return!1;var i=a.result;if(C=i,n.multiple){var s=r(b.val());if(s.length>1){var u,o=n.multipleSeparator.length,c=e(t).selection().start,f=0;e.each(s,function(e,t){return f+=t.length,f>=c?(u=e,!1):void(f+=o)}),s[u]=i,i=s.join(n.multipleSeparator)}i+=n.multipleSeparator}return b.val(i),l(),b.trigger("result",[a.data,a.value]),!0}function i(e,t){if(p==v.DEL)return void I.hide();b.trigger("changesuper");var a=b.val();(t||a!=C)&&(C=a,a=s(a),a.length>=n.minChars?(b.addClass(n.loadingClass),n.matchCase||(a=a.toLowerCase()),f(a,c,l)):(g(),I.hide()))}function r(t){return t?n.multiple?e.map(t.split(n.multipleSeparator),function(n){return e.trim(t).length?e.trim(n):null}):[e.trim(t)]:[""]}function s(a){if(!n.multiple)return a;var i=r(a);if(1==i.length)return i[0];var s=e(t).selection().start;return i=r(s==a.length?a:a.replace(a.substring(s),"")),i[i.length-1]}function u(a,i){n.autoFill&&s(b.val()).toLowerCase()==a.toLowerCase()&&p!=v.BACKSPACE&&(b.val(b.val()+i.substring(s(C).length)),e(t).selection(C.length,C.length+i.length))}function o(){clearTimeout(h),h=setTimeout(l,200)}function l(){I.visible();I.hide(),clearTimeout(h),g(),n.mustMatch&&b.search(function(e){if(!e)if(n.multiple){var t=r(b.val()).slice(0,-1);b.val(t.join(n.multipleSeparator)+(t.length?n.multipleSeparator:""))}else b.val(""),b.trigger("result",null)})}function c(e,t){t&&t.length&&y?(g(),I.display(t,e),u(e,t[0].value),I.show()):l()}function f(a,i,r){n.matchCase||(a=a.toLowerCase());var u=x.load(a);if(u&&u.length)i(a,u);else if("string"==typeof n.url&&n.url.length>0){var o={timestamp:+new Date};e.each(n.extraParams,function(e,t){o[e]="function"==typeof t?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:s(a),limit:n.max},o),success:function(e){if(!e.response.ts||e.response.ts&&e.response.ts>S){S=e.response.ts;var t=n.parse&&n.parse(e)||d(e);x.add(a,t),i(a,t)}}})}else I.emptyList(),r(a)}function d(t){for(var a=[],i=t.split("\n"),r=0;r<i.length;r++){var s=e.trim(i[r]);s&&(s=s.split("|"),a[a.length]={data:s,value:s[0],result:n.formatResult&&n.formatResult(s,s[0])||s[0]})}return a}function g(){b.removeClass(n.loadingClass)}var h,p,m,v={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},b=e(t).attr("autocomplete","off").addClass(n.inputClass),C="",x=e.Autocompleter.Cache(n),y=0,w={mouseDownOnSelect:!1},I=e.Autocompleter.Select(n,t,a,w),S=0;e.browser.opera&&e(t.form).bind("submit.autocomplete",function(){return m?(m=!1,!1):void 0}),b.bind((e.browser.opera?"keypress":"keydown")+".autocomplete",function(r){switch(p=r.keyCode,r.keyCode){case v.UP:r.preventDefault(),I.visible()?(I.prev(),e(t).val(I.currentSelected().result)):i(0,!0);break;case v.DOWN:r.preventDefault(),I.visible()?(I.next(),e(t).val(I.currentSelected().result)):i(0,!0);break;case v.PAGEUP:r.preventDefault(),I.visible()?(I.pageUp(),e(t).val(I.currentSelected().result)):i(0,!0);break;case v.PAGEDOWN:r.preventDefault(),I.visible()?(I.pageDown(),e(t).val(I.currentSelected().result)):i(0,!0);break;case n.multiple&&","==e.trim(n.multipleSeparator)&&v.COMMA:case v.TAB:case v.RETURN:if(a())return r.preventDefault(),m=!0,!1;break;case v.ESC:I.hide();break;default:clearTimeout(h),h=setTimeout(i,n.delay)}}).focus(function(){y++}).blur(function(){y=0,w.mouseDownOnSelect||o()}).click(function(){y++>1&&!I.visible()&&i(0,!0)}).bind("search",function(){function t(e,t){var a;if(t&&t.length)for(var i=0;i<t.length;i++)if(t[i].result.toLowerCase()==e.toLowerCase()){a=t[i];break}"function"==typeof n?n(a):b.trigger("result",a&&[a.data,a.value])}var n=arguments.length>1?arguments[1]:null;e.each(r(b.val()),function(e,n){f(n,t,t)})}).bind("flushCache",function(){x.flush()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&x.populate()}).bind("unautocomplete",function(){I.unbind(),b.unbind(),e(t.form).unbind(".autocomplete")}).bind("hideSuggestions",function(){o()})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){function n(e,n){t.matchCase||(e=e.toLowerCase());var a=e.indexOf(n);return"word"==t.matchContains&&(a=e.toLowerCase().search("\\b"+n.toLowerCase())),-1==a?!1:0==a||t.matchContains}function a(e,n){u>t.cacheLength&&r(),s[e]||u++,s[e]=n}function i(){if(!t.data)return!1;var n={},i=0;t.url||(t.cacheLength=1),n[""]=[];for(var r=0,s=t.data.length;s>r;r++){var u=t.data[r];u="string"==typeof u?[u]:u;var o=t.formatMatch(u,r+1,t.data.length);if(o!==!1){var l=o.charAt(0).toLowerCase();n[l]||(n[l]=[]);var c={value:o,data:u,result:t.formatResult&&t.formatResult(u)||o};n[l].push(c),i++<t.max&&n[""].push(c)}}e.each(n,function(e,n){t.cacheLength++,a(e,n)})}function r(){s={},u=0}var s={},u=0;return setTimeout(i,25),{flush:r,add:a,populate:i,load:function(a){if(!t.cacheLength||!u)return null;if(!t.url&&t.matchContains){var i=[];for(var r in s)if(r.length>0){var o=s[r];e.each(o,function(e,t){n(t.value,a)&&i.push(t)})}return i}if(s[a])return s[a];if(t.matchSubset)for(var l=a.length-1;l>=t.minChars;l--){var o=s[a.substr(0,l)];if(o){var i=[];return e.each(o,function(e,t){n(t.value,a)&&(i[i.length]=t)}),i}}return null}}},e.Autocompleter.Select=function(t,n,a,i){function r(){b&&(g=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),h=e("<ul/>").appendTo(g).mouseover(function(t){s(t).nodeName&&"LI"==s(t).nodeName.toUpperCase()&&(m=e("li",h).removeClass(p.ACTIVE).index(s(t)),e(s(t)).addClass(p.ACTIVE))}).click(function(t){return e(s(t)).addClass(p.ACTIVE),a(),n.focus(),!1}).mousedown(function(){i.mouseDownOnSelect=!0}).mouseup(function(){i.mouseDownOnSelect=!1}),t.width>0&&g.css("width",t.width),b=!1)}function s(e){for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t?t:[]}function u(e){f.slice(m,m+1).removeClass(p.ACTIVE),o(e);var n=f.slice(m,m+1).addClass(p.ACTIVE);if(t.scroll){var a=0;f.slice(0,m).each(function(){a+=this.offsetHeight}),a+n[0].offsetHeight-h.scrollTop()>h[0].clientHeight?h.scrollTop(a+n[0].offsetHeight-h.innerHeight()):a<h.scrollTop()&&h.scrollTop(a)}}function o(e){m+=e,0>m?m=f.size()-1:m>=f.size()&&(m=0)}function l(e){return t.max&&t.max<e?t.max:e}function c(){h.empty();for(var n=l(d.length),a=0;n>a;a++)if(d[a]){var i=t.formatItem(d[a].data,a+1,n,d[a].value,v);if(i!==!1){var r=e("<li/>").html(t.highlight(i,v)).addClass(a%2==0?"ac_even":"ac_odd").appendTo(h)[0];e.data(r,"ac_data",d[a])}}f=h.find("li"),t.selectFirst&&(f.slice(0,1).addClass(p.ACTIVE),m=0),e.fn.bgiframe&&h.bgiframe()}var f,d,g,h,p={ACTIVE:"ac_over"},m=-1,v="",b=!0;return{display:function(e,t){r(),d=e,v=t,c()},next:function(){u(1)},prev:function(){u(-1)},pageUp:function(){u(0!=m&&0>m-8?-m:-8)},pageDown:function(){u(m!=f.size()-1&&m+8>f.size()?f.size()-1-m:8)},hide:function(){g&&g.hide(),f&&f.removeClass(p.ACTIVE),m=-1},visible:function(){return g&&g.is(":visible")},current:function(){return this.visible()&&(f.filter("."+p.ACTIVE)[0]||t.selectFirst&&f[0])},show:function(){var a=e(n).offset();if(g.css({width:"string"==typeof t.width||t.width>0?t.width:e(n).width(),top:a.top+n.offsetHeight,left:a.left}).show(),t.scroll&&(h.scrollTop(0),h.css({maxHeight:t.scrollHeight,overflow:"auto"}),e.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var i=0;f.each(function(){i+=this.offsetHeight});var r=i>t.scrollHeight;h.css("height",r?t.scrollHeight:i),r||f.width(h.width()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")))}},selected:function(){var t=f&&f.filter("."+p.ACTIVE).removeClass(p.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},currentSelected:function(){var t=f&&f.filter("."+p.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){h&&h.empty()},unbind:function(){g&&g.remove()}}},e.fn.selection=function(e,t){if(void 0!==e)return this.each(function(){if(this.createTextRange){var n=this.createTextRange();void 0===t||e==t?(n.move("character",e),n.select()):(n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)});var n=this[0];if(n.createTextRange){var a=document.selection.createRange(),i=n.value,r="<->",s=a.text.length;a.text=r;var u=n.value.indexOf(r);return n.value=i,this.selection(u,u+s),{start:u,end:u+s}}return void 0!==n.selectionStart?{start:n.selectionStart,end:n.selectionEnd}:void 0}}(jQuery),function(e){e.fn.extend({autosuggest:function(t){return this.each(function(){new e.Autosuggest(this,t)})}}),e.Autosuggest=function(t,n){function a(){var e="[\\?&]"+n.suggestionFlagParameter+"=([^&#]*)",t=new RegExp(e),a=t.exec(window.location.href);return null!=a&&a.length>=2?a[1]:null}function i(){var t=a();null==t&&null!=n.suggestionFlagCookie&&null!=m&&(t=m),null!=t&&t.indexOf("s")>=0&&t.indexOf("i")<0&&(e(n.indexInput).val(n.defaultIndex),l()),h=n.defaultIndex}function r(e){return null!=n[e]?n[e]:s(n[e+"Input"])}function s(t){return-1!=t.indexOf(":radio")&&(t+=":checked"),e(t).val()}function u(t,n){-1!=t.indexOf(":radio")?e(t).each(function(){e(this).val()==n?e(this).attr("checked",!0):e(this).attr("checked",!1)}):e(t).val(n)}function o(e){var t=new Array;e=e.response.docs;for(var n=0;n<e.length;n++)t[n]={data:e[n],value:e[n].type,result:e[n].ac};return t}function l(){$input.setOptions({extraParams:{index:r("index"),source:r("source")}}).flushCache()}function c(e){return e.type.toLowerCase()!=n.hiddenOnDefaultIndex.toLowerCase()||h!=n.defaultIndex&&""!=h?'<span><span class="as_sleft">'+e.ac+"</span><small>"+e.type+"</small></span>":'<span><span class="as_sleft">'+e.ac+"</span><small></small></span>"}function f(e,t){return t=t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1"),t=t.split(" ").join("|").replace(/\,/,""),e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")}function d(e){for(var e=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var a=t[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}var g=e(t).attr("id"),h="";defaults={searchId:"",searchInput:"",indexInput:"#Ntk",index:null,sourceInput:"#source",source:null,suggestionFlagParameter:"sugg",suggestionFlagInput:"#sugg",suggestionFlagCookie:null,querySubmit:"#querySubmit",queryForm:"#queryBox",suggestUrl:"http://autosuggest.trln.org/suggestservice/",clearIndexOnFirstFocus:!0,clearIndexOnFirstChange:!1,defaultIndex:"Keyword",hiddenOnDefaultIndex:"title",submitOnSelect:!0},n.searchInput="#"+g,n.searchId=g,"suggestionFlagInput"in n&&!("suggestionFlagParameter"in n)&&e(n.suggestionFlagInput).length&&(n.suggestionFlagParameter=e(n.suggestionFlagInput).attr("name")),n=e.extend({},defaults,n),acdefaults={dataType:"jsonp",parse:o,extraParams:{index:r("index"),source:r("source")},formatItem:c,cacheLength:20,highlight:f,matchSubset:!1,max:15,minChars:3,selectFirst:!1,delay:150,scrollHeight:200};var p=null;"autocompleteOptions"in n&&(p=n.autocompleteOptions),p=e.extend({},acdefaults,p);var m=null;null!=n.suggestionFlagCookie&&(m=d(n.suggestionFlagCookie));var v=a();if(null!=n.suggestionFlagCookie&&null!=v){var b=new Date;b.setTime(b.getTime()+18e5),document.cookie=n.suggestionFlagCookie+"="+v+"; expires="+b.toGMTString()+"; path=/",e(n.queryForm).bind("submit",function(){document.cookie=n.suggestionFlagCookie+"="+v+"; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"})}$input=e(t).autocomplete(n.suggestUrl,p);var C=n.clearIndexOnFirstFocus,x=n.clearIndexOnFirstChange;$input.focus(function(){C&&(C=!1,i())}).bind("changesuper",function(){x&&(x=!1,i())}).bind("keyup",function(){""==$input.val()&&$input.hideSuggestions()}).result(function(t,a,i){var r=i;if(r=r.substring(0,1).toUpperCase()+r.substring(1),h==n.defaultIndex&&r.toLowerCase()!=n.hiddenOnDefaultIndex.toLowerCase()&&u(n.indexInput,r),e(n.suggestionFlagInput).val(e(n.suggestionFlagInput).val()+"s"),n.submitOnSelect)try{e(n.querySubmit).attr("form").onsubmit()}catch(s){e(n.queryForm).submit()}}),e(n.indexInput).each(function(){e(this).change(function(){sugg=e(n.suggestionFlagInput).val(),h=r("index"),h!=n.defaultIndex?"i"!=sugg&&e(n.suggestionFlagInput).val("i"):"i"==sugg&&e(n.suggestionFlagInput).val(""),l()})}),e(n.sourceInput).each(function(){e(this).change(l)})}}(jQuery),jQuery(document).ready(function(){jQuery("#Ntt").autosuggest({source:"duke",autocompleteOptions:{width:350}})}),jQuery(document).ready(function(){window.innerWidth>640?jQuery(".best-bet-flag").delay(50).fadeIn(500):jQuery(".best-bet-flag").remove(),jQuery(".best-bet-link")[0]&&jQuery.ajax({url:"/sites/all/modules/dul_bento/assets/includes/bestbets_logger.php?id="+jQuery(".best-bet-link").data("best-bet-id")+"&event=bb_serve",timeout:1e4}),jQuery(".best-bet-link").click(function(){jQuery.ajax({url:"/sites/all/modules/dul_bento/assets/includes/bestbets_logger.php?id="+jQuery(".best-bet-link").data("best-bet-id")+"&event=bb_click",timeout:1e4})})}),function(e){function t(){e("#cse_libguides .gs-no-results-result div:contains('No Results')").html('No Research Guides results found for your term<br /><br /><a href="/research/guides">Browse our guides &raquo;</a> ')}setInterval(function(){t()},100)}(jQuery),function(e){e(window).load(function(){e("#results-books div.thumbnail").find("img").each(function(){var t=(e(this),e(this).get(0).naturalWidth),n=e(this).closest("div");2>t&&n.addClass("hide")}),e("#results-images div.thumbnail").find("img").each(function(){var t=(e(this),e(this).get(0).naturalWidth),n=e(this).closest("div");2>t&&n.html("<p>No preview available</p>")})})}(jQuery);