function ClearText(a){document.forms.queryBox.elements.Ntt.value="",document.forms.queryBox.elements.Ntt.className="catalog_search"}!function(a){a.fn.extend({autocomplete:function(b,c){var d="string"==typeof b;return c=a.extend({},a.Autocompleter.defaults,{url:d?b:null,data:d?null:b,delay:d?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c),c.highlight=c.highlight||function(a){return a},c.formatMatch=c.formatMatch||c.formatItem,this.each(function(){new a.Autocompleter(this,c)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")},hideSuggestions:function(){this.trigger("hideSuggestions")}}),a.Autocompleter=function(b,c){function o(){var d=l.selected();if(!d)return!1;var f=d.result;if(g=f,c.multiple){var h=q(e.val());if(h.length>1){var k,i=c.multipleSeparator.length,j=a(b).selection().start,m=0;a.each(h,function(a,b){return m+=b.length,j<=m?(k=a,!1):void(m+=i)}),h[k]=f,f=h.join(c.multipleSeparator)}f+=c.multipleSeparator}return e.val(f),u(),e.trigger("result",[d.data,d.value]),!0}function p(a,b){if(j==d.DEL)return void l.hide();e.trigger("changesuper");var f=e.val();(b||f!=g)&&(g=f,f=r(f),f.length>=c.minChars?(e.addClass(c.loadingClass),c.matchCase||(f=f.toLowerCase()),w(f,v,u)):(y(),l.hide()))}function q(b){return b?c.multiple?a.map(b.split(c.multipleSeparator),function(c){return a.trim(b).length?a.trim(c):null}):[a.trim(b)]:[""]}function r(d){if(!c.multiple)return d;var e=q(d);if(1==e.length)return e[0];var f=a(b).selection().start;return e=q(f==d.length?d:d.replace(d.substring(f),"")),e[e.length-1]}function s(f,h){c.autoFill&&r(e.val()).toLowerCase()==f.toLowerCase()&&j!=d.BACKSPACE&&(e.val(e.val()+h.substring(r(g).length)),a(b).selection(g.length,g.length+h.length))}function t(){clearTimeout(f),f=setTimeout(u,200)}function u(){l.visible();l.hide(),clearTimeout(f),y(),c.mustMatch&&e.search(function(a){if(!a)if(c.multiple){var b=q(e.val()).slice(0,-1);e.val(b.join(c.multipleSeparator)+(b.length?c.multipleSeparator:""))}else e.val(""),e.trigger("result",null)})}function v(a,b){b&&b.length&&i?(y(),l.display(b,a),s(a,b[0].value),l.show()):u()}function w(d,e,f){c.matchCase||(d=d.toLowerCase());var g=h.load(d);if(g&&g.length)e(d,g);else if("string"==typeof c.url&&c.url.length>0){var i={timestamp:+new Date};a.each(c.extraParams,function(a,b){i[a]="function"==typeof b?b():b}),a.ajax({mode:"abort",port:"autocomplete"+b.name,dataType:c.dataType,url:c.url,data:a.extend({q:r(d),limit:c.max},i),success:function(a){if(!a.response.ts||a.response.ts&&a.response.ts>n){n=a.response.ts;var b=c.parse&&c.parse(a)||x(a);h.add(d,b),e(d,b)}}})}else l.emptyList(),f(d)}function x(b){for(var d=[],e=b.split("\n"),f=0;f<e.length;f++){var g=a.trim(e[f]);g&&(g=g.split("|"),d[d.length]={data:g,value:g[0],result:c.formatResult&&c.formatResult(g,g[0])||g[0]})}return d}function y(){e.removeClass(c.loadingClass)}var f,j,m,d={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},e=a(b).attr("autocomplete","off").addClass(c.inputClass),g="",h=a.Autocompleter.Cache(c),i=0,k={mouseDownOnSelect:!1},l=a.Autocompleter.Select(c,b,o,k),n=0;a.browser.opera&&a(b.form).bind("submit.autocomplete",function(){if(m)return m=!1,!1}),e.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(e){switch(j=e.keyCode,e.keyCode){case d.UP:e.preventDefault(),l.visible()?(l.prev(),a(b).val(l.currentSelected().result)):p(0,!0);break;case d.DOWN:e.preventDefault(),l.visible()?(l.next(),a(b).val(l.currentSelected().result)):p(0,!0);break;case d.PAGEUP:e.preventDefault(),l.visible()?(l.pageUp(),a(b).val(l.currentSelected().result)):p(0,!0);break;case d.PAGEDOWN:e.preventDefault(),l.visible()?(l.pageDown(),a(b).val(l.currentSelected().result)):p(0,!0);break;case c.multiple&&","==a.trim(c.multipleSeparator)&&d.COMMA:case d.TAB:case d.RETURN:if(o())return e.preventDefault(),m=!0,!1;break;case d.ESC:l.hide();break;default:clearTimeout(f),f=setTimeout(p,c.delay)}}).focus(function(){i++}).blur(function(){i=0,k.mouseDownOnSelect||t()}).click(function(){i++>1&&!l.visible()&&p(0,!0)}).bind("search",function(){function c(a,c){var d;if(c&&c.length)for(var f=0;f<c.length;f++)if(c[f].result.toLowerCase()==a.toLowerCase()){d=c[f];break}"function"==typeof b?b(d):e.trigger("result",d&&[d.data,d.value])}var b=arguments.length>1?arguments[1]:null;a.each(q(e.val()),function(a,b){w(b,c,c)})}).bind("flushCache",function(){h.flush()}).bind("setOptions",function(){a.extend(c,arguments[1]),"data"in arguments[1]&&h.populate()}).bind("unautocomplete",function(){l.unbind(),e.unbind(),a(b.form).unbind(".autocomplete")}).bind("hideSuggestions",function(){t()})},a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(a,b){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},a.Autocompleter.Cache=function(b){function e(a,c){b.matchCase||(a=a.toLowerCase());var d=a.indexOf(c);return"word"==b.matchContains&&(d=a.toLowerCase().search("\\b"+c.toLowerCase())),d!=-1&&(0==d||b.matchContains)}function f(a,e){d>b.cacheLength&&h(),c[a]||d++,c[a]=e}function g(){if(!b.data)return!1;var c={},d=0;b.url||(b.cacheLength=1),c[""]=[];for(var e=0,g=b.data.length;e<g;e++){var h=b.data[e];h="string"==typeof h?[h]:h;var i=b.formatMatch(h,e+1,b.data.length);if(i!==!1){var j=i.charAt(0).toLowerCase();c[j]||(c[j]=[]);var k={value:i,data:h,result:b.formatResult&&b.formatResult(h)||i};c[j].push(k),d++<b.max&&c[""].push(k)}}a.each(c,function(a,c){b.cacheLength++,f(a,c)})}function h(){c={},d=0}var c={},d=0;return setTimeout(g,25),{flush:h,add:f,populate:g,load:function(f){if(!b.cacheLength||!d)return null;if(!b.url&&b.matchContains){var g=[];for(var h in c)if(h.length>0){var i=c[h];a.each(i,function(a,b){e(b.value,f)&&g.push(b)})}return g}if(c[f])return c[f];if(b.matchSubset)for(var j=f.length-1;j>=b.minChars;j--){var i=c[f.substr(0,j)];if(i){var g=[];return a.each(i,function(a,b){e(b.value,f)&&(g[g.length]=b)}),g}}return null}}},a.Autocompleter.Select=function(b,c,d,e){function n(){k&&(l=a("<div/>").hide().addClass(b.resultsClass).css("position","absolute").appendTo(document.body),m=a("<ul/>").appendTo(l).mouseover(function(b){o(b).nodeName&&"LI"==o(b).nodeName.toUpperCase()&&(h=a("li",m).removeClass(f.ACTIVE).index(o(b)),a(o(b)).addClass(f.ACTIVE))}).click(function(b){return a(o(b)).addClass(f.ACTIVE),d(),c.focus(),!1}).mousedown(function(){e.mouseDownOnSelect=!0}).mouseup(function(){e.mouseDownOnSelect=!1}),b.width>0&&l.css("width",b.width),k=!1)}function o(a){for(var b=a.target;b&&"LI"!=b.tagName;)b=b.parentNode;return b?b:[]}function p(a){g.slice(h,h+1).removeClass(f.ACTIVE),q(a);var c=g.slice(h,h+1).addClass(f.ACTIVE);if(b.scroll){var d=0;g.slice(0,h).each(function(){d+=this.offsetHeight}),d+c[0].offsetHeight-m.scrollTop()>m[0].clientHeight?m.scrollTop(d+c[0].offsetHeight-m.innerHeight()):d<m.scrollTop()&&m.scrollTop(d)}}function q(a){h+=a,h<0?h=g.size()-1:h>=g.size()&&(h=0)}function r(a){return b.max&&b.max<a?b.max:a}function s(){m.empty();for(var c=r(i.length),d=0;d<c;d++)if(i[d]){var e=b.formatItem(i[d].data,d+1,c,i[d].value,j);if(e!==!1){var k=a("<li/>").html(b.highlight(e,j)).addClass(d%2==0?"ac_even":"ac_odd").appendTo(m)[0];a.data(k,"ac_data",i[d])}}g=m.find("li"),b.selectFirst&&(g.slice(0,1).addClass(f.ACTIVE),h=0),a.fn.bgiframe&&m.bgiframe()}var g,i,l,m,f={ACTIVE:"ac_over"},h=-1,j="",k=!0;return{display:function(a,b){n(),i=a,j=b,s()},next:function(){p(1)},prev:function(){p(-1)},pageUp:function(){p(0!=h&&h-8<0?-h:-8)},pageDown:function(){p(h!=g.size()-1&&h+8>g.size()?g.size()-1-h:8)},hide:function(){l&&l.hide(),g&&g.removeClass(f.ACTIVE),h=-1},visible:function(){return l&&l.is(":visible")},current:function(){return this.visible()&&(g.filter("."+f.ACTIVE)[0]||b.selectFirst&&g[0])},show:function(){var d=a(c).offset();if(l.css({width:"string"==typeof b.width||b.width>0?b.width:a(c).width(),top:d.top+c.offsetHeight,left:d.left}).show(),b.scroll&&(m.scrollTop(0),m.css({maxHeight:b.scrollHeight,overflow:"auto"}),a.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var e=0;g.each(function(){e+=this.offsetHeight});var f=e>b.scrollHeight;m.css("height",f?b.scrollHeight:e),f||g.width(m.width()-parseInt(g.css("padding-left"))-parseInt(g.css("padding-right")))}},selected:function(){var b=g&&g.filter("."+f.ACTIVE).removeClass(f.ACTIVE);return b&&b.length&&a.data(b[0],"ac_data")},currentSelected:function(){var b=g&&g.filter("."+f.ACTIVE);return b&&b.length&&a.data(b[0],"ac_data")},emptyList:function(){m&&m.empty()},unbind:function(){l&&l.remove()}}},a.fn.selection=function(a,b){if(void 0!==a)return this.each(function(){if(this.createTextRange){var c=this.createTextRange();void 0===b||a==b?(c.move("character",a),c.select()):(c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b),c.select())}else this.setSelectionRange?this.setSelectionRange(a,b):this.selectionStart&&(this.selectionStart=a,this.selectionEnd=b)});var c=this[0];if(c.createTextRange){var d=document.selection.createRange(),e=c.value,f="<->",g=d.text.length;d.text=f;var h=c.value.indexOf(f);return c.value=e,this.selection(h,h+g),{start:h,end:h+g}}return void 0!==c.selectionStart?{start:c.selectionStart,end:c.selectionEnd}:void 0}}(jQuery),function(a){a.fn.extend({autosuggest:function(b){return this.each(function(){new a.Autosuggest(this,b)})}}),a.Autosuggest=function(b,c){function l(){var a="[\\?&]"+c.suggestionFlagParameter+"=([^&#]*)",b=new RegExp(a),d=b.exec(window.location.href);return null!=d&&d.length>=2?d[1]:null}function m(){var b=l();null==b&&null!=c.suggestionFlagCookie&&null!=g&&(b=g),null!=b&&b.indexOf("s")>=0&&b.indexOf("i")<0&&(a(c.indexInput).val(c.defaultIndex),r()),e=c.defaultIndex}function n(a){return null!=c[a]?c[a]:o(c[a+"Input"])}function o(b){return b.indexOf(":radio")!=-1&&(b+=":checked"),a(b).val()}function p(b,c){b.indexOf(":radio")!=-1?a(b).each(function(){a(this).val()==c?a(this).attr("checked",!0):a(this).attr("checked",!1)}):a(b).val(c)}function q(a){var b=new Array;a=a.response.docs;for(var c=0;c<a.length;c++)b[c]={data:a[c],value:a[c].type,result:a[c].ac};return b}function r(){$input.setOptions({extraParams:{index:n("index"),source:n("source")}}).flushCache()}function s(a,b,d){return a.type.toLowerCase()!=c.hiddenOnDefaultIndex.toLowerCase()||e!=c.defaultIndex&&""!=e?'<span><span class="as_sleft">'+a.ac+"</span><small>"+a.type+"</small></span>":'<span><span class="as_sleft">'+a.ac+"</span><small></small></span>"}function t(a,b){return b=b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1"),b=b.split(" ").join("|").replace(/\,/,""),a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")}function u(a){for(var a=a+"=",b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}var d=a(b).attr("id"),e="";defaults={searchId:"",searchInput:"",indexInput:"#Ntk",index:null,sourceInput:"#source",source:null,suggestionFlagParameter:"sugg",suggestionFlagInput:"#sugg",suggestionFlagCookie:null,querySubmit:"#querySubmit",queryForm:"#queryBox",suggestUrl:"https://autosuggest.trln.org/suggestservice/",clearIndexOnFirstFocus:!0,clearIndexOnFirstChange:!1,defaultIndex:"Keyword",hiddenOnDefaultIndex:"title",submitOnSelect:!0},c.searchInput="#"+d,c.searchId=d,"suggestionFlagInput"in c&&!("suggestionFlagParameter"in c)&&a(c.suggestionFlagInput).length&&(c.suggestionFlagParameter=a(c.suggestionFlagInput).attr("name")),c=a.extend({},defaults,c),acdefaults={dataType:"jsonp",parse:q,extraParams:{index:n("index"),source:n("source")},formatItem:s,cacheLength:20,highlight:t,matchSubset:!1,max:15,minChars:3,selectFirst:!1,delay:150,scrollHeight:200};var f=null;"autocompleteOptions"in c&&(f=c.autocompleteOptions),f=a.extend({},acdefaults,f);var g=null;null!=c.suggestionFlagCookie&&(g=u(c.suggestionFlagCookie));var h=l();if(null!=c.suggestionFlagCookie&&null!=h){var i=new Date;i.setTime(i.getTime()+18e5),document.cookie=c.suggestionFlagCookie+"="+h+"; expires="+i.toGMTString()+"; path=/",a(c.queryForm).bind("submit",function(){document.cookie=c.suggestionFlagCookie+"="+h+"; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"})}$input=a(b).autocomplete(c.suggestUrl,f);var j=c.clearIndexOnFirstFocus,k=c.clearIndexOnFirstChange;$input.focus(function(a){j&&(j=!1,m())}).bind("changesuper",function(a){k&&(k=!1,m())}).bind("keyup",function(){""==$input.val()&&$input.hideSuggestions()}).result(function(b,d,f){var g=f;if(g=g.substring(0,1).toUpperCase()+g.substring(1),e==c.defaultIndex&&g.toLowerCase()!=c.hiddenOnDefaultIndex.toLowerCase()&&p(c.indexInput,g),a(c.suggestionFlagInput).val(a(c.suggestionFlagInput).val()+"s"),c.submitOnSelect)try{a(c.querySubmit).attr("form").onsubmit()}catch(b){a(c.queryForm).submit()}}),a(c.indexInput).each(function(){a(this).change(function(b){sugg=a(c.suggestionFlagInput).val(),e=n("index"),e!=c.defaultIndex?"i"!=sugg&&a(c.suggestionFlagInput).val("i"):"i"==sugg&&a(c.suggestionFlagInput).val(""),r()})}),a(c.sourceInput).each(function(){a(this).change(r)})}}(jQuery),jQuery(document).ready(function(){jQuery("#Ntt").autosuggest({source:"duke",autocompleteOptions:{width:350}})}),jQuery(document).ready(function(){window.innerWidth>640?jQuery(".best-bet-flag").delay(50).fadeIn(500):jQuery(".best-bet-flag").remove(),jQuery(".best-bet-link")[0]&&jQuery.ajax({url:"/sites/all/modules/dul_bento/assets/includes/bestbets_logger.php?id="+jQuery(".best-bet-link").data("best-bet-id")+"&event=bb_serve",timeout:1e4}),jQuery(".best-bet-link").click(function(){jQuery.ajax({url:"/sites/all/modules/dul_bento/assets/includes/bestbets_logger.php?id="+jQuery(".best-bet-link").data("best-bet-id")+"&event=bb_click",timeout:1e4})})}),function(a){function c(){a("#cse_libguides .gs-no-results-result div:contains('No Website results found for your term.')").html('No Collection Guides results found for your term<br /><br /><a href="//library.duke.edu/rubenstein/findingaids/">Browse our collection guides &raquo;</a> '),a("#cse_libguides .gs-no-results-result div:contains('Collection')").length&&a("#results-collection-guides .see-all").hide(),a("#cse_web .gs-no-results-result div:contains('Website')").length&&a("#results-website .see-all").hide()}setInterval(function(){c()},100)}(jQuery),function(a){a(window).load(function(){a("#results-books div.thumbnail").find("img").each(function(){var c=(a(this),a(this).get(0).naturalWidth),d=a(this).closest("div");c<2&&d.addClass("hide")}),a("#results-images div.thumbnail").find("img").each(function(){var c=(a(this),a(this).get(0).naturalWidth),d=a(this).closest("div");c<2&&d.html("<p>No preview available</p>")})})}(jQuery);